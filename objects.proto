syntax = "proto3";

package EcdarProtoBuf;

option java_multiple_files = false;
option java_package = "EcdarProtoBuf";
option java_outer_classname = "ObjectProtos";

message StateTuple {
  message LocationTuple {
    string name = 1;
    // Maybe the component name? or some comp id?
  }
  LocationTuple location = 1;
  repeated Zone federation = 2;
}

message Transition {
  // Figure out what we need here
  // repeated Edge edges = 1; //?
}

message SpecificComponent {
  string component_name = 1;
  uint32 component_index = 2;
}

message Zone {
  message Disjunction {
    message Conjunction {
      message Constraint {
        message ComponentClock {
          SpecificComponent specific_component = 1;
          string clock_name = 2;
        }
        // This message represents if (!strict) { x - y <= c } else { x - y < c }
        ComponentClock x = 1;
        ComponentClock y = 2;
        bool strict = 3;
        int32 c = 4;
      }
      repeated Constraint constraints = 1;
    }

    repeated Conjunction conjunctions = 1;
  }
  Disjunction disjunction = 1;
}

message LocationTuple {
  message Location {
    string id = 1;
    string component_name = 2;
  }
  repeated Location locations = 1;
}

message State {
  LocationTuple location_tuple = 1;
  Zone zone = 2;
}

message DecisionPoint {
  State source = 1;
  repeated Edge edges = 2;
}

message Edge {
  string id = 1;
  SpecificComponent specific_component = 2;
}

message Decision {
  State source = 1;
  Edge edge = 2;
}
